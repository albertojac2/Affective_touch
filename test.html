<!doctype html>
<html lang="en">

  <head>
    <title>Videos7[jsPsych]</title>
    <meta charset="UTF-8">
    <script type="text/javascript" src="jspsych.js"></script>
  	<link href="css/jspsych.css" rel="stylesheet" type="text/css" />
  	<script type="text/javascript" src="plugins/jspsych-html-keyboard-response.js"></script>
    <script type="text/javascript" src="plugins/jspsych-html-slider-response.js"></script>
    <script type="text/javascript" src="plugins/jspsych-video-keyboard-response.js"></script>
    <script type="text/javascript" src="plugins/jspsych-fullscreen.js"></script>
    <script type="text/javascript" src="plugins/jspsych-survey-text.js"></script>
  </head>
  <body>
    <form id="form1" class="pageclip-form" method="post" >
    <!-- Replace these inputs with your own. Make sure they have a "name" attribute! -->
    <input id = "inp1" type="hidden" name="Form1 " value="Roscoe Jones" />
    </form>
    <!-- <script src="https://s.pageclip.co/v1/pageclip.js" charset="utf-8"></script> -->

    </body>

  <script>
    console.log(document.getElementById("inp1").value)
    /* create timeline */
    var timeline = [];


    // defining groups of questions that will go together.
    var survey_trial = {
      type: 'survey-text',
      questions: [{prompt: "¿Cuántos años tienes?"},
      {prompt: "¿Cuál es tu sexo?", placeholder: "Hombre / Mujer / Otro"}
      ]
    };


    timeline.push(survey_trial);
    var slider_self = {
      type: 'html-slider-response',
      stimulus: '<p>________________________________________________</p>',
      min: 1,
      max: 70,
      start:35,
      labels: ['1', '2','3','4','5','6','7'],
      prompt: "<p>Puntúa lo que te gusta a ti</p>"
    };

    var slider_other = {
      type: 'html-slider-response',
      stimulus: '<p>________________________________________________</p>',
      min: 1,
      max: 70,
      start:35,
      labels: ['1<br>nada', '2','3','4','5','6','7<br>mucho'],
      prompt: "<p>Puntúa lo que crees que le gusta a esa persona</p>"
    };

    var procedure = {
      timeline: [slider_self,slider_other],
      randomize_order: true,
      repetitions: 1
    }
    timeline.push(procedure);

    /* define instructions trial */
    var end_instructions = {
      type: "html-keyboard-response",
      stimulus: function(){
                var data = jsPsych.data.get().json();
                var html='<form id="form1" action="https://send.pageclip.co/JOpA3fUSnKykj1ztXRukbxNcQY4NFhra" class="pageclip-form" method="post" >';
                html += '<input id = "inp1" type="hidden" name="Form1" value="las"/></form>';
                console.log(html)
                document.body.innerHTML = document.body.innerHTML + html;
                return html;

            },
      post_trial_gap: 100
    };
    timeline.push(end_instructions);

    function submitform()
    {
         var theForm = document.getElementById("form1");
         theForm.action="https://send.pageclip.co/JOpA3fUSnKykj1ztXRukbxNcQY4NFhra"
         theForm.submit();
    };
    function endExperiment(dataset,callback) {

        $.post('submit',{"content": dataset});
        setTimeout(callback,1000)

    }
    // call the saveData function after the experiment is over
    jsPsych.init({
      timeline: timeline,
      on_finish: function() {
              var data = jsPsych.data.get().csv();
             var theForm = document.getElementById("form1");
             var inp1 = document.getElementById("inp1");

             // inp1.value = data;
             //
             // theForm.action="https://send.pageclip.co/JOpA3fUSnKykj1ztXRukbxNcQY4NFhra"
             // theForm.submit();
        }
      });


  </script>

<script src="https://s.pageclip.co/v1/pageclip.js" charset="utf-8"></script>

</html>
